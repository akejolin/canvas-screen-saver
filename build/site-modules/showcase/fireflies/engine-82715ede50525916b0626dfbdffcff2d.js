import s from"../../../web_modules/react-d5feeccd9551fb7f62a2e2573736736e.js";import"../../../web_modules/prop-types-76f17b5f1ab0157dea4931c8b7a2f947.js";import a from"./particles-program-07cb0044234182860736daf37b8fd037.js";import{clearAllIntervals as o}from"./interval-handler-c2a464ee22e041ce506d89f42f719423.js";import h from"../../components/flex-view/index-254e82abef81aba0868e9ce3efb9a9e9.js";import{randomNumBetween as c}from"./helpers-38882a545c1cac7384ff6d123701d97e.js";class l extends s.Component{constructor(t){super();this.canvas=s.createRef(),this.state={screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1},context:null,count:0,tilt:0},this.particles=[],this.run=this.run.bind(this),this.emojis=["ðŸ˜œ","ðŸ˜","ðŸ™","ðŸ‘","âœŒï¸","ðŸ¦Š","ðŸ·","ðŸ¶","ðŸ±","ðŸ°","ðŸ¦","ðŸ¯","ðŸ®","ðŸµ","ðŸŒ","ðŸ","ðŸ³","ðŸ¦‹","ðŸ¦€","ðŸ¸","ðŸ¦„","ðŸ˜","ðŸ‘»","ðŸŒŽ","ðŸŒ","â­ï¸","ðŸª","â˜€ï¸","ðŸŒž","ðŸŒ™","ðŸ’§","âš¡ï¸","ðŸŒˆ","ðŸ”¥","ðŸ’¥","ðŸŒº","ðŸ€","ðŸŒ¿","ðŸŽ„","ðŸŒµ","ðŸŒ»","ðŸ„","ðŸ‡","ðŸŽ","ðŸŠ","ðŸŒ","ðŸŒ½","ðŸ‰","ðŸŒ¶","ðŸ­","ðŸ¹","ðŸŽ‚","ðŸ§","ðŸ”","ðŸŒ­","ðŸ¿","ðŸ€","âš½ï¸","ðŸ†","ðŸŽº","ðŸŽª","â˜‚ï¸","ðŸ‘ ","ðŸš•","ðŸš‘","ðŸš“","ðŸš’","ðŸšœ","ðŸ›´","ðŸš²","ðŸ•¹","ðŸ§²","â°","ðŸ”‘","â¤ï¸","ðŸ–"]}componentWillMount(){this.handleResize(null,null)}componentDidUpdate(t,e,i){e.context!==this.state.context&&e.context===null&&this.run()}componentDidMount(){const t=this.canvas.current.getContext("2d");this.setState({context:t})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),o()}run(){o();const t=this.state.context;t.save(),t.scale(this.state.screen.ratio,this.state.screen.ratio),t.fillStyle="#000000",t.globalAlpha=.4,t.fillRect(0,0,this.state.screen.width,this.state.screen.height),t.globalAlpha=1,t.restore(),requestAnimationFrame(()=>this.update()),window.addEventListener("resize",this.handleResize.bind(this,!1)),this.startProgram()}handleResize(t,e){const i=window.devicePixelRatio||1,n=window.innerWidth*i,r=window.innerHeight*i;this.setState({screen:{width:n,height:r,ratio:i,size:n>600?"L":"S"}})}update(){const t=this.state.context;t.save(),this.updateObjects(this.particles,"particles"),t.restore(),requestAnimationFrame(()=>this.update())}updateObjects(t,e){let i=0;for(let n of t)n.delete?this[e].splice(i,1):t[i].render(this.state),i++}startProgram(){const t=this.emojis[Math.floor(c(0,this.emojis.length-1))],e=new a({position:{x:Math.ceil(this.state.screen.width/2),y:Math.ceil(this.state.screen.height/2-this.state.screen.height*.5)},create:this.createObject.bind(this),text:t,ctx:this.state.context,emojis:this.emojis});e.init(this.state,t),this.createObject(e,"particles")}createObject(t,e){this[e].push(t)}deleteAll(t){const{particles:e}=this;for(var i=e.length;i>0;)i--,e[i].delete=!0}optionClicked(t){this.deleteAll("particles"),this.startProgram()}render(){return s.createElement(s.Fragment,null,s.createElement("canvas",{style:{display:"block",backgroundColor:"black",color:"white",top:0,bottom:0,left:0,right:0,width:"100vw",height:"100vh"},ref:this.canvas,width:this.state.screen.width,height:this.state.screen.height}),s.createElement(h,{style:{position:"absolute",zIndex:9,bottom:10,height:60}},s.createElement("button",{style:{marginBottom:0},onClick:this.optionClicked.bind(this)},"New")))}}export default l;
