import s from"../../../web_modules/react-d5feeccd9551fb7f62a2e2573736736e.js";import"../../../web_modules/prop-types-76f17b5f1ab0157dea4931c8b7a2f947.js";import r from"./particles-program-2ee9e47758ff263772cec51f93a6ddcd.js";import{clearAllIntervals as a}from"./interval-handler-c2a464ee22e041ce506d89f42f719423.js";import h from"../../components/flex-view/index-254e82abef81aba0868e9ce3efb9a9e9.js";import{randomNumBetween as o}from"./helpers-38882a545c1cac7384ff6d123701d97e.js";class l extends s.Component{constructor(e){super();this.canvas=s.createRef(),this.state={screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1},context:null,count:0,tilt:0},this.particles=[],this.run=this.run.bind(this),this.emojis=["😜","😍","🙏","👍","✌️","🦊","🐷","🐶","🐱","🐰","🦁","🐯","🐮","🐵","🐌","🐍","🐳","🦋","🦀","🐸","🦄","🐘","👻","🌎","🌏","⭐️","🪐","☀️","🌞","🌙","💧","⚡️","🌈","🔥","💥","🌺","🍀","🌿","🎄","🌵","🌻","🍄","🍇","🍎","🍊","🍌","🌽","🍉","🌶","🍭","🍹","🎂","🧁","🍔","🌭","🍿","🏀","⚽️","🏆","🎺","🎪","☂️","👠","🚕","🚑","🚓","🚒","🚜","🛴","🚲","🕹","🧲","⏰","🔑","❤️","🏖"]}componentWillMount(){this.handleResize(null,null)}componentDidUpdate(e,t,i){t.context!==this.state.context&&t.context===null&&this.run()}componentDidMount(){const e=this.canvas.current.getContext("2d");this.setState({context:e})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),a()}run(){a();const e=this.state.context;e.save(),e.scale(this.state.screen.ratio,this.state.screen.ratio),e.fillStyle="#000000",e.globalAlpha=.4,e.fillRect(0,0,this.state.screen.width,this.state.screen.height),e.globalAlpha=1,e.restore(),requestAnimationFrame(()=>this.update()),window.addEventListener("resize",this.handleResize.bind(this,!1)),this.startProgram()}handleResize(e,t){const i=window.devicePixelRatio||1,n=window.innerWidth*i,c=window.innerHeight*i;this.setState({screen:{width:n,height:c,ratio:i,size:n>600?"L":"S"}})}update(){const e=this.state.context;e.save(),this.updateObjects(this.particles,"particles"),e.restore(),requestAnimationFrame(()=>this.update())}updateObjects(e,t){let i=0;for(let n of e)n.delete?this[t].splice(i,1):e[i].render(this.state),i++}startProgram(){const e=this.emojis[Math.floor(o(0,this.emojis.length-1))],t=new r({size:300,position:{x:Math.ceil(this.state.screen.width/2),y:Math.ceil(this.state.screen.height/2-this.state.screen.height*.5)},create:this.createObject.bind(this),text:e,count:2019,id:"counter",ctx:this.state.context,screen:this.state.screen});t.init(this.state,e),this.createObject(t,"particles")}generateNew(){const e=this.emojis[Math.floor(o(0,this.emojis.length-1))],t=new r({size:300,position:{x:Math.ceil(this.state.screen.width/2),y:Math.ceil(this.state.screen.height/2-this.state.screen.height*.5)},create:this.createObject.bind(this),text:e,count:2019,id:"counter",ctx:this.state.context,screen:this.state.screen});t.init(this.state,e),this.createObject(t,"particles")}createObject(e,t){this[t].push(e)}deleteAll(e){const{particles:t}=this;for(var i=t.length;i>0;)i--,t[i].delete=!0}optionClicked(e){this.deleteAll("particles"),this.generateNew()}render(){return s.createElement(s.Fragment,null,s.createElement("canvas",{style:{display:"block",backgroundColor:"black",color:"white",top:0,bottom:0,left:0,right:0,width:"100vw",height:"100vh"},ref:this.canvas,width:this.state.screen.width,height:this.state.screen.height}),s.createElement(h,{style:{position:"absolute",zIndex:10,bottom:10,height:60}},s.createElement("button",{onClick:this.optionClicked.bind(this)},"Tilt")))}}export default l;
